#!/usr/bin/env python 
import graph_tool.all as gt
from graph_tool.draw import interactive_window
import sys
import argparse 
from IPython import embed

def drawMe(args) :
  print(args)
  graph = gt.load_graph(args.f, fmt='xml')
  vprops = graph.vertex_properties 
  eprops = graph.edge_properties
  if (args.v or args.e) and not args.o :
    if args.v and args.e :
      edgeMap = graph.edge_properties[args.e]
      print("Drawing with both vertex and edge map.")
      gt.graphviz_draw(graph, vprops={"label":graph.vertex_properties[args.v]}
          , eprops={'label':edgeMap})
    elif args.v  :
      print("Drawing with vertex map only.")
      gt.graphviz_draw(graph, vprops={"text":graph.vertex_properties[args.v]})
  else :
    print("Not doing anything.")
    return
  

if __name__ == "__main__" :
  parser = argparse.ArgumentParser(description="Draw a grapml graph.")
  parser.add_argument('-f', metavar='FileName', help='GraphML file')
  parser.add_argument('-v', metavar='VertexProperty')
  parser.add_argument('-e', metavar='EdgeProperty')
  parser.add_argument('-o', metavar='OutFilePath')

  args = parser.parse_args()
  drawMe(args)
